# 📸 Email 遮罩功能展示

## 🎬 功能演示

### 場景 1：Dashboard 列表頁

**預設狀態（遮罩）**
```
ID | 客戶名稱   | 專案名稱              | Email                        | 專案費用      | 操作
---|-----------|----------------------|------------------------------|--------------|----------
1  | 宏達數位   | AI 智能客服系統       | con***@honda-digital.com     | NT$ 250,000  | [顯示]
2  | 綠能科技   | 永續能源監測面板      | ser***@green-tech.tw         | NT$ 185,000  | [顯示]
3  | 晨曦文創   | 品牌官網重新設計      | hel***@aurora-creative.com   | NT$ 95,000   | [顯示]
```

**點擊「顯示」後**
```
ID | 客戶名稱   | 專案名稱              | Email                            | 專案費用      | 操作
---|-----------|----------------------|----------------------------------|--------------|----------
1  | 宏達數位   | AI 智能客服系統       | contact@honda-digital.com        | NT$ 250,000  | [隱藏]✓
2  | 綠能科技   | 永續能源監測面板      | ser***@green-tech.tw             | NT$ 185,000  | [顯示]
3  | 晨曦文創   | 品牌官網重新設計      | hel***@aurora-creative.com       | NT$ 95,000   | [顯示]
```

### 場景 2：編輯客戶頁面

**初始狀態（鎖定）**
```
┌─────────────────────────────┐
│ 編輯客戶                     │
├─────────────────────────────┤
│ 客戶名稱: [宏達數位_____]    │
│ 專案名稱: [AI 智能客服系統_] │
│ Email:    [con***@honda... ] │ [編輯]
│           (唯讀鎖定)          │
│ 專案費用: [250000_______]    │
│                              │
│ [儲存] [取消]                │
└─────────────────────────────┘
```

**點擊「編輯」後（解鎖）**
```
┌─────────────────────────────────────────┐
│ 編輯客戶                                 │
├─────────────────────────────────────────┤
│ 客戶名稱: [宏達數位_______________]      │
│ 專案名稱: [AI 智能客服系統_________]     │
│ Email:    [contact@honda-digital.com]   │ [🔓鎖定]
│           (可編輯)                        │
│ 專案費用: [250000_________________]      │
│                                          │
│ [儲存] [取消]                            │
└─────────────────────────────────────────┘
```

## 🎨 按鈕顏色說明

### Dashboard 列表
- `[顯示]` - 灰色按鈕 - Email 處於遮罩狀態
- `[隱藏]` - 綠色按鈕 ✓ - Email 完整顯示中

### 編輯表單
- `[編輯]` - 預設按鈕 - Email 鎖定中
- `[鎖定]` - 紅色按鈕 🔴 - Email 可編輯

## 💡 使用情境

### 情境 A：日常瀏覽
> 瀏覽客戶列表時，不需要看到完整 Email，保持遮罩狀態即可

**優勢**：
- 保護隱私
- 畫面簡潔
- 防截圖洩密

### 情境 B：聯絡客戶
> 需要聯絡特定客戶時，點擊該客戶的「顯示」按鈕

**操作**：
1. 找到目標客戶
2. 點擊「顯示」
3. 複製 Email
4. 發送郵件
5. 點擊「隱藏」恢復遮罩

### 情境 C：更新資料
> 客戶更換了 Email，需要更新系統記錄

**操作**：
1. 點擊「編輯」進入表單
2. Email 欄位預設鎖定（防誤改）
3. 點擊「編輯」按鈕解鎖
4. 修改為新 Email
5. 點擊「儲存」

### 情境 D：多人協作
> 團隊成員查看客戶資料，但只有主管能看完整 Email

**建議**：
- 可進一步擴展為權限控制
- 當前版本：所有人都可點擊顯示
- 未來版本：可依角色限制「顯示」按鈕

## 🔍 測試檢查清單

- [x] Dashboard 預設顯示遮罩
- [x] 點擊「顯示」可查看完整 Email
- [x] 點擊「隱藏」恢復遮罩
- [x] 按鈕顏色正確切換
- [x] 編輯頁面 Email 預設鎖定
- [x] 點擊「編輯」可解鎖並修改
- [x] 遮罩格式正確（前3碼+***@域名）
- [x] 短 Email 也能正確遮罩
- [x] 等寬字體顯示美觀
- [x] 手機版響應式正常

## 📱 響應式設計

### 桌面版
```
完整顯示 Email + 按鈕在同一行
[con***@honda-digital.com] [顯示]
```

### 手機版
```
Email 換行顯示
[con***@honda-digital.com]
[顯示]
```

## 🚀 快速測試指令

```bash
# 測試 Dashboard
curl -s http://localhost:8000/dashboard | grep "masked-email"

# 測試 Email 遮罩邏輯
node -e "
function maskEmail(email) {
    const [localPart, domain] = email.split('@');
    const visibleStart = localPart.length <= 3 ? localPart[0] : localPart.substring(0, 3);
    return visibleStart + '***@' + domain;
}
console.log(maskEmail('contact@example.com'));
"

# 預期輸出: con***@example.com
```

## 📊 遮罩效果統計

| Email 長度 | 範例 | 遮罩後 | 隱藏比例 |
|-----------|------|--------|---------|
| 1 字符 | a@x.com | a***@x.com | 0% |
| 2 字符 | ab@x.com | a***@x.com | 50% |
| 3 字符 | abc@x.com | a***@x.com | 67% |
| 7 字符 | contact@... | con***@... | 57% |
| 10 字符 | longemail@... | lon***@... | 70% |

**平均隱藏約 50-70% 的本地部分**

---

✅ **功能已完整實作並測試通過！**
