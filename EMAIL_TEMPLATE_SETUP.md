# ğŸ“§ éƒµä»¶æ¨¡æ¿åˆå§‹åŒ–æŒ‡å—

## å•é¡Œ
è¨ªå• `/send-email` é é¢æ™‚æ²’æœ‰å¯é¸æ“‡çš„éƒµä»¶æ¨¡æ¿ã€‚

## è§£æ±ºæ–¹æ¡ˆ

æœ‰å…©ç¨®æ–¹å¼åˆå§‹åŒ–éƒµä»¶æ¨¡æ¿ï¼š

### æ–¹æ³• 1: ä½¿ç”¨ç€è¦½å™¨ï¼ˆæ¨è–¦ï¼‰

1. **ç™»å…¥ç³»çµ±**
   - è¨ªå• `https://pycrm.zeabur.app/login`
   - ä½¿ç”¨ Google ç™»å…¥

2. **åœ¨ç€è¦½å™¨ Console åŸ·è¡Œ**
   - æŒ‰ F12 é–‹å•Ÿé–‹ç™¼è€…å·¥å…·
   - åˆ‡æ›åˆ° Console æ¨™ç±¤
   - è²¼ä¸Šä»¥ä¸‹ä»£ç¢¼ä¸¦æŒ‰ Enterï¼š

```javascript
fetch('/api/templates/init', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    }
})
.then(response => response.json())
.then(data => {
    console.log('âœ“ åˆå§‹åŒ–å®Œæˆ:', data);
    alert('éƒµä»¶æ¨¡æ¿å·²å»ºç«‹ï¼è«‹é‡æ–°æ•´ç†é é¢ã€‚');
})
.catch(error => {
    console.error('âŒ éŒ¯èª¤:', error);
});
```

3. **é‡æ–°æ•´ç†é é¢**
   - åˆ·æ–° `/send-email` é é¢
   - æ‡‰è©²çœ‹åˆ°ä¸‰å€‹æ¨¡æ¿é¸é …

### æ–¹æ³• 2: ä½¿ç”¨ curlï¼ˆå‘½ä»¤è¡Œï¼‰

```bash
# å¦‚æœåœ¨æœ¬åœ°é‹è¡Œ
curl -X POST "http://localhost:8000/api/templates/init"

# å¦‚æœåœ¨ Zeabur é‹è¡Œï¼ˆéœ€è¦å…ˆç™»å…¥å–å¾— cookieï¼‰
curl -X POST "https://pycrm.zeabur.app/api/templates/init" \
  --cookie "session=your_session_cookie"
```

## æ¨¡æ¿åˆ—è¡¨

åˆå§‹åŒ–å¾Œæœƒå»ºç«‹ä»¥ä¸‹ä¸‰å€‹æ¨¡æ¿ï¼š

### 1. ğŸ“„ è«‹æ¬¾å–®
- **é¡å‹**: invoice
- **ä¸»æ—¨**: ã€è«‹æ¬¾é€šçŸ¥ã€‘{{project_name}} å°ˆæ¡ˆæ¬¾é …
- **å…§å®¹**: å°ˆæ¥­çš„è«‹æ¬¾é€šçŸ¥ï¼ŒåŒ…å«é …ç›®åç¨±ã€é‡‘é¡
- **è®Šæ•¸**: 
  - `{{client_name}}` - å®¢æˆ¶å§“å
  - `{{project_name}}` - å°ˆæ¡ˆåç¨±
  - `{{project_cost}}` - å°ˆæ¡ˆé‡‘é¡

### 2. ğŸŒ• ä¸­ç§‹ç¯€å•å€™
- **é¡å‹**: greeting
- **ä¸»æ—¨**: ğŸŒ• ä¸­ç§‹ä½³ç¯€æ„‰å¿«ï¼
- **å…§å®¹**: ç¯€æ—¥å•å€™ï¼ŒåŒ…å«ç¥ç¦èª
- **è®Šæ•¸**:
  - `{{client_name}}` - å®¢æˆ¶å§“å

### 3. ğŸ‰ å‘¨å¹´æ…¶å„ªæƒ 
- **é¡å‹**: promotion
- **ä¸»æ—¨**: ğŸ‰ å‘¨å¹´æ…¶ç‰¹æƒ æ´»å‹• - é™æ™‚å„ªæƒ ï¼
- **å…§å®¹**: ä¿ƒéŠ·æ´»å‹•é€šçŸ¥ï¼Œ8æŠ˜å„ªæƒ 
- **è®Šæ•¸**:
  - `{{client_name}}` - å®¢æˆ¶å§“å

## ç¢ºèªæ¨¡æ¿å·²å»ºç«‹

### ä½¿ç”¨ API æª¢æŸ¥

åœ¨ç€è¦½å™¨ Console åŸ·è¡Œï¼š

```javascript
fetch('/api/templates')
    .then(response => response.json())
    .then(templates => {
        console.log('æ¨¡æ¿æ•¸é‡:', templates.length);
        templates.forEach(t => {
            console.log(`- ${t.name} (${t.template_type})`);
        });
    });
```

### è¨ªå•é é¢

å‰å¾€ `https://pycrm.zeabur.app/send-email`ï¼Œæ‡‰è©²çœ‹åˆ°ï¼š

```
1. é¸æ“‡éƒµä»¶æ¨¡æ¿
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â—‹ è«‹æ¬¾å–®                â”‚
â”‚   é¡å‹ï¼šğŸ’° è«‹æ¬¾å–®       â”‚
â”‚   ä¸»æ—¨ï¼šã€è«‹æ¬¾é€šçŸ¥ã€‘... â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—‹ ä¸­ç§‹ç¯€å•å€™            â”‚
â”‚   é¡å‹ï¼šğŸ‰ ç¯€æ—¥å•å€™     â”‚
â”‚   ä¸»æ—¨ï¼šğŸŒ• ä¸­ç§‹ä½³ç¯€...  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â—‹ å‘¨å¹´æ…¶å„ªæƒ             â”‚
â”‚   é¡å‹ï¼šğŸ ä¿ƒéŠ·å„ªæƒ      â”‚
â”‚   ä¸»æ—¨ï¼šğŸ‰ å‘¨å¹´æ…¶...    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¦‚æœé‚„æ˜¯æ²’æœ‰æ¨¡æ¿

### æª¢æŸ¥ 1: ç¢ºèªå·²ç™»å…¥
æ¨¡æ¿åˆå§‹åŒ–éœ€è¦ç™»å…¥æ¬Šé™ã€‚ç¢ºä¿ï¼š
- å·²ç¶“å®Œæˆ Google ç™»å…¥
- åœ¨ç™½åå–®ä¸­ï¼ˆALLOWED_EMAILSï¼‰

### æª¢æŸ¥ 2: æª¢æŸ¥è³‡æ–™åº«
åŸ·è¡Œä»¥ä¸‹ Python ä»£ç¢¼æª¢æŸ¥ï¼š

```python
from app.database import SessionLocal
from app.models import EmailTemplate

db = SessionLocal()
count = db.query(EmailTemplate).count()
print(f"æ¨¡æ¿æ•¸é‡: {count}")

if count > 0:
    templates = db.query(EmailTemplate).all()
    for t in templates:
        print(f"  - {t.name} ({t.template_type})")
db.close()
```

### æª¢æŸ¥ 3: æŸ¥çœ‹éŒ¯èª¤è¨Šæ¯
é–‹å•Ÿç€è¦½å™¨é–‹ç™¼è€…å·¥å…· (F12) â†’ Network æ¨™ç±¤ï¼Œé‡æ–°æ•´ç†é é¢ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰éŒ¯èª¤ã€‚

## æ‰‹å‹•æ·»åŠ æ¨¡æ¿ï¼ˆå‚™ç”¨æ–¹æ¡ˆï¼‰

å¦‚æœ API åˆå§‹åŒ–å¤±æ•—ï¼Œå¯ä»¥æ‰‹å‹•åŸ·è¡Œï¼š

```bash
# åœ¨æ‡‰ç”¨é‹è¡Œçš„ç’°å¢ƒä¸­åŸ·è¡Œ
python init_email_templates.py
```

æˆ–è€…åœ¨ Python ä¸­ï¼š

```python
import sys
sys.path.append('.')

from app.database import SessionLocal
from app.models import EmailTemplate

db = SessionLocal()

# å»ºç«‹è«‹æ¬¾å–®æ¨¡æ¿
template1 = EmailTemplate(
    name="è«‹æ¬¾å–®",
    template_type="invoice",
    subject="ã€è«‹æ¬¾é€šçŸ¥ã€‘{{project_name}} å°ˆæ¡ˆæ¬¾é …",
    content="...",  # HTML å…§å®¹
    is_active=True
)
db.add(template1)

# ... å…¶ä»–æ¨¡æ¿

db.commit()
db.close()
```

## æ¨¡æ¿è®Šæ•¸èªªæ˜

æ‰€æœ‰æ¨¡æ¿éƒ½æ”¯æ´ä»¥ä¸‹è®Šæ•¸ï¼š

- `{{client_name}}` - è‡ªå‹•å¡«å…¥å®¢æˆ¶å§“å
- `{{project_name}}` - è‡ªå‹•å¡«å…¥å°ˆæ¡ˆåç¨±  
- `{{project_cost}}` - è‡ªå‹•å¡«å…¥å°ˆæ¡ˆé‡‘é¡ï¼ˆæ ¼å¼åŒ–ç‚º NT$ xx,xxxï¼‰

è®Šæ•¸æœƒåœ¨ç™¼é€éƒµä»¶æ™‚è‡ªå‹•æ›¿æ›ç‚ºå¯¦éš›å€¼ã€‚

## æ¸¬è©¦ç™¼é€

æ¨¡æ¿å»ºç«‹å¾Œï¼š

1. å‰å¾€ `/send-email`
2. é¸æ“‡ä¸€å€‹æ¨¡æ¿
3. é¸æ“‡æ”¶ä»¶å®¢æˆ¶
4. é»æ“Šã€Œç™¼é€éƒµä»¶ã€
5. æª¢æŸ¥ `/email-logs` æŸ¥çœ‹ç™¼é€è¨˜éŒ„

---

**å¿«é€Ÿåˆå§‹åŒ–ï¼šç€è¦½å™¨ Console â†’ è²¼ä¸Šä»£ç¢¼ â†’ Enter â†’ åˆ·æ–°é é¢** âœ…
